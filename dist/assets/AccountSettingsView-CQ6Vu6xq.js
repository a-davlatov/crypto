import{d as D,r as v,be as U,o as z,M as i,a as V,e as B,w as s,f as w,b as e,t as C,u as c,g as F,ct as I,cu as L,bu as M,bf as m,bg as N,bh as O,cv as R,X as A,bi as j,L as q,cw as T,cx as E,cy as b,b8 as H}from"./index-DYXwBPv-.js";import{a as W,_ as X}from"./index-C8ixjve7.js";const Z={class:"container"},$={class:"profile__avatar"},G=D({__name:"AccountSettingsView",setup(J){const _=v(),d=v(!1),h=I(),t=U({username:"",email:"",password:"",checkPass:""}),y={username:[{required:!0,message:"Please input your username",trigger:"change"},{min:3,max:20,message:"Length should be 3 to 20",trigger:"blur"}],email:[{required:!0,message:"Please input your email",trigger:"blur"}],password:[{validator:async(o,a)=>{var l;const n=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/.test(a);return a!==""&&!n?Promise.reject("Password must contain at least 8 characters including 1 uppercase letter, 1 lowercase letter, 1 number, and 1 special character"):(t.checkPass!==""&&((l=_.value)==null||l.validateFields("checkPass")),Promise.resolve())},trigger:"change"}],checkPass:[{validator:async(o,a)=>a!==t.password?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"}]},x=async o=>{try{d.value=!0;const a={username:o.username,email:o.email};o.password!==""&&(a.password=o.password),await L(a),i.userData=null,i.signedIn=!1,localStorage.removeItem("userData"),h.push("/"),M("1"),m.success("Saved successfully"),m.info("Re-authorize please.",10)}catch(a){throw m.error("Something went wrong, try again later please"),a}finally{d.value=!1}};return z(()=>{var o,a;t.username=(o=i.userData)==null?void 0:o.data.username,t.email=(a=i.userData)==null?void 0:a.data.email}),(o,a)=>{const n=W,l=N,u=O,p=R,P=A,f=X,k=j,S=q;return V(),B(S,null,{default:s(()=>[w("div",Z,[e(f,{gutter:[16,16]},{default:s(()=>[e(n,{xl:4},{default:s(()=>{var r,g;return[w("div",$,C((g=(r=c(i).userData)==null?void 0:r.data.username)==null?void 0:g.slice(0,1)),1)]}),_:1}),e(n,{xl:20},{default:s(()=>[e(k,{layout:"vertical",ref_key:"formRef",ref:_,model:t,rules:y,onFinish:x},{default:s(()=>[e(f,{gutter:[16,0]},{default:s(()=>[e(n,{xs:24,md:12},{default:s(()=>[e(u,{"has-feedback":"",name:"username",label:"Username"},{default:s(()=>[e(l,{value:t.username,"onUpdate:value":a[0]||(a[0]=r=>t.username=r),size:"large"},{prefix:s(()=>[e(c(T),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,md:12},{default:s(()=>[e(u,{"has-feedback":"",name:"email",label:"Email"},{default:s(()=>[e(l,{value:t.email,"onUpdate:value":a[1]||(a[1]=r=>t.email=r),size:"large",type:"email"},{prefix:s(()=>[e(c(E),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,md:12},{default:s(()=>[e(u,{"has-feedback":"",name:"password",label:"New password (do not fill in to leave an old password)"},{default:s(()=>[e(p,{value:t.password,"onUpdate:value":a[2]||(a[2]=r=>t.password=r),type:"password",size:"large",autocomplete:"off"},{prefix:s(()=>[e(c(b),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,md:12},{default:s(()=>[e(u,{"has-feedback":"",name:"checkPass",label:"Confirm password"},{default:s(()=>[e(p,{value:t.checkPass,"onUpdate:value":a[3]||(a[3]=r=>t.checkPass=r),type:"password",size:"large",autocomplete:"off"},{prefix:s(()=>[e(c(b),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,md:4},{default:s(()=>[e(u,null,{default:s(()=>[e(P,{type:"primary","html-type":"submit",loading:d.value},{default:s(()=>[F(" Save ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])]),_:1})}}}),ae=H(G,[["__scopeId","data-v-b2c53ead"]]);export{ae as default};
